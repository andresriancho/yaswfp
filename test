#!/bin/bash
#
# Copyright 2014 Facundo Batista

set -eu

if [ $# -ne 0 ]; then
    TARGET="$@"
else
    TARGET="."
fi

# Detect python version to setup the right commands to run
PYTHON_VERSION=`python -c 'import sys; print(sys.version_info.major)'`
if [ $PYTHON_VERSION == "2\n" ]; then
    NOSE="nosetests3"
else
    NOSE="nosetests"
fi

$NOSE -v -s $TARGET
flake8 $TARGET
rm -rf __pycache__
